import React from 'react';
import { cn } from "@/lib/utils";

interface MediaItem {
    src: string;
    type: 'image' | 'video';
    alt: string;
    clipId: 'clip-splash1' | 'clip-splash2' | 'clip-inverted';
}

interface ImageMaskingProps extends React.ComponentPropsWithoutRef<'section'> {
    mediaItems?: MediaItem[];
}

const ImageMasking = React.forwardRef<HTMLElement, ImageMaskingProps>(
    ({ mediaItems, className, ...props }, ref) => {
        const defaultMediaItems: MediaItem[] = [
            {
                src: 'https://images.unsplash.com/photo-1583939003579-730e3918a45a?w=800&auto=format&fit=crop',
                alt: 'Wedding ceremony',
                clipId: 'clip-splash1',
                type: 'image',
            },
            {
                src: 'https://images.unsplash.com/photo-1511795409834-ef04bbd61622?w=800&auto=format&fit=crop',
                alt: 'Traditional wedding decor',
                clipId: 'clip-splash2',
                type: 'image',
            },
        ];

        const itemsToRender = mediaItems || defaultMediaItems;

        return (
            <div className="relative overflow-visible">
                <svg className='clipppy absolute -top-[999px] -left-[999px] w-0 h-0'>
                    <defs>
                        <clipPath id='clip-splash1' clipPathUnits={'objectBoundingBox'}>
                            <path
                                d='M0.0271455 0.648845C0.0980831 0.726913 0.10439 0.612222 0.133616 0.610068C0.154217 0.599231 0.173485 0.615134 0.192072 0.631611L0.148231 0.743636L0.200423 0.726401L0.231738 0.769487L0.296457 0.808265V0.877204L0.325684 0.844889C0.327541 0.913991 0.325223 0.959549 0.354912 0.971994C0.38089 0.950581 0.378584 0.915999 0.367438 0.844889C0.380174 0.863793 0.390393 0.87106 0.413367 0.877204C0.420514 0.860977 0.424888 0.852387 0.438419 0.844889C0.458266 0.852916 0.462024 0.865571 0.459296 0.898747C0.490595 0.898419 0.495791 0.880353 0.496874 0.836271C0.517745 0.836271 0.565222 0.854871 0.605434 0.836271C0.639053 0.802207 0.628393 0.780259 0.645094 0.750099C0.661795 0.719938 0.739045 0.816883 0.764097 0.756562C0.771103 0.7317 0.754069 0.720928 0.701461 0.704858C0.722789 0.665743 0.731631 0.652635 0.711905 0.648845L0.697292 0.66608C0.677383 0.665498 0.67086 0.661038 0.663889 0.648845L0.722344 0.612222C0.738823 0.590168 0.74419 0.578187 0.739045 0.558364C0.728706 0.559406 0.722747 0.557452 0.711905 0.547592C0.713016 0.539063 0.71569 0.534982 0.728607 0.530358C0.714079 0.509087 0.710722 0.49827 0.711905 0.480808L0.793319 0.418333C0.809469 0.398149 0.818013 0.391049 0.805851 0.366629C0.787535 0.343541 0.776718 0.341086 0.755747 0.366629C0.740729 0.407633 0.730153 0.424274 0.703555 0.431259C0.69278 0.428498 0.688042 0.425127 0.684766 0.41187C0.704085 0.378025 0.712442 0.372249 0.703555 0.366629C0.686706 0.356502 0.675741 0.366294 0.655538 0.390327C0.661795 0.310617 0.707724 0.280456 0.684766 0.248142C0.65514 0.21475 0.64535 0.284489 0.62631 0.38171C0.617082 0.382729 0.612139 0.381652 0.605434 0.366629C0.610766 0.334832 0.612381 0.319976 0.605434 0.314926C0.590989 0.315945 0.58044 0.326348 0.561592 0.345086C0.545766 0.3405 0.539608 0.331576 0.53654 0.297691L0.561592 0.230907C0.560557 0.180006 0.53654 0.151197 0.496874 0.151197C0.438413 0.151202 0.419719 0.166418 0.396665 0.230907C0.382046 0.282611 0.402507 0.300966 0.386227 0.334314C0.308977 0.338623 0.31524 0.258913 0.296457 0.269685C0.282557 0.279751 0.286621 0.29547 0.296457 0.325697C0.282918 0.334813 0.275861 0.333226 0.265141 0.306308C0.260005 0.265229 0.256703 0.243243 0.231738 0.25245C0.213308 0.265273 0.215877 0.278447 0.24844 0.314926C0.259823 0.32449 0.255881 0.337956 0.24844 0.362321C0.213743 0.362228 0.198963 0.359177 0.192072 0.366629C0.164927 0.38171 0.202505 0.409716 0.177453 0.474345C0.122214 0.472037 0.101714 0.4691 0.0856006 0.478654C0.112479 0.485945 0.126886 0.491281 0.148231 0.508815C0.143245 0.539187 0.132942 0.549364 0.10439 0.558364C0.0284494 0.578268 -0.00417535 0.614376 0.0271455 0.648845Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.208768 0.101648C0.207826 0.153438 0.214329 0.181953 0.244259 0.230907C0.250457 0.171908 0.242037 0.143882 0.208768 0.101648Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.265141 0.101648C0.263052 0.120318 0.264301 0.163261 0.286013 0.185666C0.294029 0.138635 0.286798 0.122634 0.265141 0.101648Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.851775 0.166277C0.856474 0.174164 0.851086 0.187431 0.812109 0.243833C0.812109 0.243833 0.869513 0.196862 0.881002 0.217981C0.892491 0.2391 0.756585 0.361122 0.736952 0.33216C0.717505 0.303471 0.764092 0.194283 0.851775 0.166277Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.674322 0.194283C0.661795 0.177077 0.693111 0.0844413 0.732777 0.0671784C0.749478 0.075824 0.697286 0.187849 0.674322 0.194283Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.200423 0.791031C0.137124 0.834322 0.0778885 0.864759 0.0751566 0.892284C0.0876827 0.897311 0.122756 0.900039 0.162839 0.870741C0.202923 0.841442 0.204597 0.805393 0.200423 0.791031Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.97286 0.644537C0.891343 0.659489 0.782881 0.6618 0.772443 0.655308C0.768267 0.64672 0.811274 0.634627 0.866388 0.629457C0.921503 0.624286 0.97286 0.633794 0.97286 0.644537Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.649269 0.89013C0.630898 0.874618 0.634656 0.849197 0.638831 0.838426L0.711905 0.931062C0.698682 0.923881 0.667641 0.905641 0.649269 0.89013Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.970772 0.612222C0.954071 0.610498 0.944328 0.600014 0.941545 0.594987C0.939457 0.591397 0.941545 0.583785 0.966597 0.582062C0.991649 0.580338 0.999304 0.588525 1 0.592833C0.997216 0.600014 0.987474 0.613945 0.970772 0.612222Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.749478 0.98492C0.749478 0.972856 0.763396 0.972712 0.770355 0.974148V1C0.763396 1 0.749478 0.996984 0.749478 0.98492Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.724426 0.943988C0.716587 0.953083 0.717282 0.968578 0.736952 0.96984C0.740251 0.952258 0.737988 0.946034 0.724426 0.943988Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0 0.314926C0.0146138 0.341496 0.0484342 0.396359 0.0668058 0.403253C0.0575069 0.348132 0.0398385 0.332529 0 0.314926Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.183716 0.0520981C0.164927 0.0607438 0.181628 0.0930638 0.200418 0.0822587C0.217119 0.0715206 0.203333 0.0430714 0.183716 0.0520981Z'
                                fill='#D9D9D9'
                            />
                            <path
                                d='M0.728601 0.0478178C0.718163 0.0451249 0.71691 0.0353228 0.720251 0.0198117C0.723591 0.00430053 0.732777 -0.0017331 0.741127 0.000422748L0.741131 0.000423645C0.749669 0.002628 0.757828 0.00473431 0.753653 0.0262746C0.750378 0.0431745 0.736952 0.0499722 0.728601 0.0478178Z'
                                fill='#D9D9D9'
                            />
                        </clipPath>
                        <clipPath id='clip-splash2' clipPathUnits={'objectBoundingBox'}>
                            <path
                                d='M0.333196 0.00104804C0.324206 0.00410496 0.313495 0.01278 0.310055 0.0198027C0.305599 0.029056 0.30771 0.0369049 0.321157 0.0606993C0.333196 0.0820977 0.337887 0.094408 0.338982 0.107131C0.340076 0.120185 0.338513 0.129852 0.331242 0.155216C0.326629 0.171575 0.325457 0.178762 0.326082 0.188677C0.326864 0.200244 0.328584 0.21181 0.331398 0.223377C0.334604 0.236844 0.334604 0.243949 0.331555 0.249154C0.330304 0.25122 0.327958 0.254111 0.326317 0.255516L0.27331 0.218089C0.262756 0.201235 0.259863 0.189338 0.251498 0.128778C0.244149 0.0754056 0.24321 0.0716877 0.23461 0.0588817C0.224916 0.0444233 0.211234 0.0377311 0.19896 0.0415316C0.182542 0.0544202C0.178946 0.0595426 0.173629 0.0708615 0.171988 0.0771406C0.170346 0.0831718 0.169564 0.105479 0.170268 0.122168C0.190126 0.193551 0.206387 0.21305 0.232891 0.228252C0.25439 0.240562 0.277063 0.268239 0.287461 0.294843L0.287773 0.326982C0.283004 0.332848 0.268619 0.339209 0.262443 0.338135C0.257205 0.337227 0.244227 0.332683 0.236721 0.329213C0.204589 0.310623C0.191846 0.302774 0.186998 0.301039 0.177617 0.301039C0.172613 0.301039 0.168782 0.301452 0.167062 0.302196C0.156821 0.30674 0.152208 0.31525 0.153772 0.326899C0.154632 0.333674 0.157133 0.338714 0.162606 0.344993C0.18348 0.354742C0.193566 0.35532 0.228903 0.359038 0.235783 0.360195C0.250872 0.362673 0.260254 0.376223 0.254234 0.387046C0.249856 0.394978 0.236096 0.401339 0.196927 0.413732C0.164404 0.42406 0.150644 0.426456 0.108427 0.429513C0.0722291 0.432156 0.0565929 0.434387 0.0468985 0.438188C0.0239133 0.447358 0.00554087 0.465535 0.00155365 0.483133C-8.81454e-05 0.490568 -0.00055723 0.510562 0.000771843 0.518328C0.0308714 0.566578C0.0390022 0.570874 0.0445531 0.571949 0.0595638 0.571949C0.0719163 0.571949 0.0733236 0.571783 0.0791871 0.569718C0.0826271 0.568478 0.0877089 0.566 0.0905234 0.5641C0.101781 0.556416 0.107645 0.549724 0.127737 0.52122C0.173629 0.475284L0.187389 0.520311C0.178711 0.539892 0.165655 0.550054 0.127737 0.566743C0.100687 0.578641 0.0863798 0.587564 0.0757472 0.599213L0.0757472 0.639201C0.127816 0.642423C0.141497 0.629039 0.164013 0.599709 0.17918 0.575336C0.188562 0.560299 0.196458 0.554103 0.206231 0.554185C0.214127 0.554185 0.2196 0.556829 0.225385 0.563521C0.234689 0.580128C0.237347 0.587811 0.237269 0.593843 0.233907 0.612102C0.230467 0.630939 0.230389 0.635318 0.233438 0.640275C0.243054 0.650933 0.252592 0.653824C0.261192 0.656468 0.274014 0.65432 0.279095 0.649446C0.280815 0.647793 0.284412 0.64044 0.285897 0.635648C0.291135 0.618215 0.30341 0.610449 0.312088 0.619042L0.314824 0.624577L0.297233 0.69406C0.284099 0.740823 0.272841 0.772714 0.258143 0.805183C0.248683 0.826086 0.239301 0.843849 0.209358 0.8978L0.189187 0.954146C0.188562 0.970092 0.190986 0.981906 0.196693 0.99149L0.203573 0.997604C0.207638 0.999752 0.208889 1 0.215534 1C0.224603 0.999917 0.230701 0.998348 0.240161 0.99339C0.252905 0.986781 0.261661 0.97761 0.268228 0.964061C0.275421 0.949189 0.278079 0.936631 0.285506 0.881441L0.303175 0.773044C0.318889 0.700835 0.341484 0.645976 0.355400 0.645976C0.361185 0.645976 0.370567 0.655064 0.375258 0.665309C0.379010 0.673323 0.380027 0.679271 0.380027 0.692242C0.371114 0.740905C0.363843 0.765361 0.362436 0.772053 0.361967 0.784363C0.362827 0.800474C0.366501 0.815511 0.372756 0.822616 0.384561 0.825177C0.390347 0.826499 0.410204 0.826499 0.416615 0.825177C0.423339 0.823855 0.432330 0.819311 0.434753 0.815924C0.438740 0.788907C0.438740 0.778332 0.438350 0.769822 0.437724 0.766187L0.423104 0.73033C0.413019 0.710997 0.412941 0.710667 0.413019 0.69596C0.415052 0.676793C0.420212 0.658864 0.432173 0.647793 0.445699 0.648619C0.454767 0.653163C0.461413 0.660764 0.472280 0.685798 0.480958 0.71331C0.503630 0.840131L0.512621 0.908044C0.518172 0.925642 0.529117 0.943323 0.537014 0.947619C0.541392 0.950015 0.547177 0.949685 0.552963 0.946793C0.565237 0.940679 0.570084 0.930600 0.569850 0.911597C0.549757 0.850046C0.532245 0.811462 0.528961 0.803035 0.519188 0.773209C0.502145 0.697613C0.502067 0.686872 0.502301 0.684146 0.504021 0.677454C0.512778 0.655394 0.521221 0.653494C0.531463 0.652337 0.535919 0.654733C0.551321 0.682328C0.560624 0.712319 0.570006 0.731817 0.581264 0.744458C0.586971 0.750820 0.591349 0.753381 0.596431 0.753381C0.602998 0.753381 0.613396 0.748424 0.618322 0.742888L0.621605 0.721159L0.620902 0.695134L0.622778 0.677949C0.626922 0.669026 0.638570 0.663326 0.653034 0.663326C0.665855 0.663326 0.678521 0.668696 0.688059 0.678197C0.715109 0.771144L0.717533 0.792625C0.720426 0.806257 0.732856 0.815345 0.748805 0.815345C0.755842 0.815345 0.763034 0.813280 0.770774 0.808984C0.786254 0.776101C0.783518 0.748176 0.775152 0.730743 0.739580 0.678362L0.718940 0.643084C0.714484 0.631021 0.715188 0.616398 0.720738 0.605162C0.741065 0.583680C0.744818 0.581698 0.746460 0.581367 0.751698 0.581450C0.762096 0.581532 0.777185 0.586324 0.793681 0.594751C0.826752 0.616811 0.835430 0.635070C0.842700 0.653577 0.847313 0.673570C0.873269 0.741401C0.879211 0.750902 0.892032 0.764369 0.898443 0.767922C0.910796 0.773457 0.917676 0.773044C0.925650 0.772549 0.931905 0.769326 0.938003 0.762717C0.952779 0.730247C0.954186 0.720746 0.954733 0.680345 0.953639 0.667374C0.947619 0.636474C0.941521 0.616563 0.933468 0.602187 0.920803 0.588885C0.892189 0.565008 0.878116 0.560712C0.858180 0.558812C0.843326 0.559060 0.833553 0.561291C0.820966 0.563687 0.810881 0.563687C0.800405 0.563687 0.798372 0.563439 0.792117 0.561373C0.767021 0.550220 0.760532 0.543858C0.749196 0.520063C0.749196 0.509240 0.754747 0.500978 0.770383 0.488338C0.788521 0.469418C0.792430 0.461238 0.792117 0.447358 0.787818 0.438022C0.767256 0.417285C0.756858 0.409436 0.752402 0.404644 0.749743 0.398282C0.748102 0.386468C0.748805 0.369779 0.756623 0.361682 0.788365 0.344249C0.865138 0.309549 0.902743 0.308310C0.931514 0.308806 0.952779 0.312276C0.983035 0.313597C0.993277 0.302031 0.997420 0.288977C1 0.270883C1 0.262621 0.999609 0.259647 0.998358 0.255846C0.967242 0.226764C0.939879 0.219577 0.896723 0.225773 0.867484 0.241140C0.772572 0.311367C0.743333 0.335987 0.733404 0.341523 0.714797 0.343506C0.669061 0.324421C0.662650 0.310954 0.668826 0.297404 0.685401 0.288316C0.714328 0.277080C0.741222 0.263200 0.749900 0.252129C0.761940 0.227260C0.763425 0.219742 0.762956 0.212306 0.760454 0.201896C0.745834 0.179093C0.732466 0.176614 0.726680 0.179506C0.699395 0.203714C0.680944 0.222716C0.674690 0.228169 0.667263 0.232052 0.661790 0.232630C0.620823 0.200491C0.619260 0.194212 0.619494 0.182067 0.621292 0.172649C0.638570 0.117459C0.651314 0.0680524C0.651314 0.0587990 0.651079 0.0566509 0.649438 0.0523547C0.620511 0.0258339C0.613553 0.0238510 0.595571 0.0237684 0.588613 0.0257513C0.551477 0.0739184C0.545457 0.103579C0.545457 0.112336 0.547255 0.119690 0.552963 0.134726C0.559608 0.154472C0.561093 0.160504 0.561172 0.161826 0.560312 0.165791C0.520830 0.195699C0.514732 0.195617 0.511605 0.194047 0.502849 0.186611C0.492685 0.179093C0.476814 0.175540 0.471107 0.176119C0.434831 0.208506C0.410204 0.229408C0.385343 0.218668C0.383310 0.203796C0.369081 0.144062C0.359465 0.124316C0.352116 0.104405C0.350865 0.0544202C0.342109 -0.000356492 0.337653 -0.000439112 0.333196 0.00104804Z'
                                fill='black'
                            />
                        </clipPath>
                        <clipPath id='clip-inverted' clipPathUnits={'objectBoundingBox'}>
                            <path
                                d='M0.0998072 1H0.422076H0.749756C0.767072 1 0.774207 0.961783 0.77561 0.942675V0.807325C0.777053 0.743631 0.791844 0.731953 0.799059 0.734076H0.969813C0.996268 0.730255 1.00088 0.693206 0.999875 0.675159V0.0700637C0.999875 0.0254777 0.985045 0.00477707 0.977629 0H0.902473C0.854975 0 0.890448 0.138535 0.850165 0.138535H0.0204424C0.00408849 0.142357 0 0.180467 0 0.199045V0.410828C0 0.449045 0.0136283 0.46603 0.0204424 0.469745H0.0523086C0.0696245 0.471019 0.0735527 0.497877 0.0733523 0.511146V0.915605C0.0723903 0.983121 0.090588 1 0.0998072 1Z'
                                fill='#D9D9D9'
                            />
                        </clipPath>
                    </defs>
                </svg>
                <section
                    ref={ref}
                    className={cn('grid grid-cols-1 md:grid-cols-2 gap-8 p-5', className)}
                    {...props}
                >
                    {itemsToRender.map((item, index) => (
                        <figure key={index} className="relative group overflow-hidden" style={{ clipPath: `url(#${item.clipId})` }}>
                            {item.type === 'image' ? (
                                <img
                                    src={item.src}
                                    alt={item.alt}
                                    className='transition-all duration-700 aspect-square align-bottom object-cover hover:scale-110 w-full'
                                />
                            ) : (
                                <video
                                    autoPlay
                                    muted
                                    loop
                                    playsInline
                                    className='transition-all duration-700 aspect-square align-bottom object-cover hover:scale-110 w-full'
                                >
                                    <source src={item.src} type='video/mp4' />
                                </video>
                            )}
                        </figure>
                    ))}
                </section>
            </div>
        );
    }
);

ImageMasking.displayName = 'ImageMasking';

export default ImageMasking;
export type { MediaItem };
